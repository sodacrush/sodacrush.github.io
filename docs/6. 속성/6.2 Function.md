# *Function

Define function

```
*FUNCTION, TYPE=type, Name=name
  dataline...
```

__Keyword line__

- __TYPE=type__ : type of function
    * __Table__ :(x,y) tabular function
    * __File__ : (x,y) tabular function by external file
    * __String__ : function by mathematical expression
    * __HognestadCEnv__ : Hognestad concrete compressive envelope
    * __FIBCEnv__ : FIB concrete compressive envelope
    * __MPPCEnv__ : Mander-Pristley-Park concrete compressive envelope
    * __MPPCIE__ : Mander-Pristley-Park concrete compressive inelastic strain
    * __MaekawaTEnv__ : Maekawa concrete tensile envelope
- __Name=name__ : function name

함수 관련 명령어는 y=f(x) 형태의 함수를 정의한다. 함수는 재료 모델을 정의할 때 포락선을 정의하거나, 하중을 정의할 때 시간이력으로 사용된다. 함수는 자신만의 이름을 가지며 중복될 수 없다. 



### 테이블 함수 
Define multilinear function by (x,y) input

```
*FUNCTION, TYPE=Table, Name=name
 x0 y0  x1 y1 ...
 ...
```

__First dataline ans subsequent datalines__

- __x0 y0 x1 y1...__: (x,y) 형태로 입력. 여러 line이 올 수 있고, 2개 항씩 하나의 (x,y) 쌍으로 구성됨.


__Example__
```
*Function, TYPE=Table, Name=func1
 0., 45.3
 2.802903E-3 86.4
 7.26864E-5 122.5
```

### 파일 함수
Define multilinear function by external file

```
*FUNCTION, TYPE=FILE, Name=name
 File=file, Step=xtep, S=scale, Comment=comment
```

__First dataline ans subsequent datalines__
- __File=file__ : file name(required)
- __Step=xstep__ : constant x-step size(optional). 주어진 경우 파일에서 y 값만 존재하고, Step 키워드를 생략할 경우 파일에서 (x,y) 쌍으로 데이터가 존재하는 것으로 가정한다.
- __S=scale__ : Scale factor for y-value. (optional, default 1)
- __Comment=comment__ : Commentation character in the file, (optional, default '#')

Examples
```
*Function, Type=FILE, Name=func2
 File=Elcentro.dat Step=0.02 S=3.01
```

 
### String
Define function by mathematical expression

```
*Function, Type=STRING, Name=name
  Expr=expreesion Range=min,max
```

__First dataline__

- __Expr=expression__ : Expression with x independent variable, such as "sin(x)+1". Note tha white space is not allowed.
- __Range=min,max__ : minimun and maximun range. Zero function value is assumed beyond the givne range. If Range keyword is not given, no range check is performed

hfStringFunction uses hfMathExpParser in parsing the expression. hfMathExpParser suppports typical mathematical functions, such as sin(x), cos(x), tan(x), acos(x), atan(x), cosh(x), sinh(x), tanh(x), fabs(x), exp(x), log(x), log10(x), sqrt(x), step(x), sgn(x), and pow(x,n).

__Example__
```
*Function, Type=String Name=Half-sine
 Expr=sin(2*pi/1.2*x) Range=0.,0.6
```

### HognestadCEnv
Hognestad의 콘크리트 재하곡선(compressive envelope)을 정의한다.

```
*Function, Type=HognestadCEnv, Name=name
  fco=fco, Ec=Ec, ec20=ec20, ecu=ecu
```

__First dataline__

- __fco=fco__ : compressive strength (requied)
- __Ec=Ec__ : initial tangent modulus (required)
- __ec20__ : straint at 0.85fcm concrete stress of of descending branch(optional, default 0.003)
- __ecu__ : ultimate strain (optional, default ec20)


Hognestad’s cmpressive envelope of concrete  given as


 
where,  coressponding to  is given as

    				

그림 1.6 Hognestad 모델


__Example__
```
*Function, Type=HognestadCEnv, Name=HognestadTest1
 fco=25. Ec=23500. 
 
*Function, Type=HognestadCEnv, Name=HognestadTest2
 fco=25. Ec=23500. ec20=0.0031 ecu = 0.0032

*Function, Type=HognestadCEnv, Name=HognestadTest3
 fco=25. Ec=23500. ec20=0.0032
```

### ParabolaCEnv
EC2와 KDS에서 정의하고 있는 단면 설계를 위한 응력-변형률 재하곡선(compressive envelope)을 정의한다.

```
*Function, Type=ParabolaCEnv, Name=name
  fco=fco, eco=eco, ecu=ecu, n=n 
```

__First dataline__

- __fco=fco__ : design compressive strength,  (requied)
- __eco__ : peak strain
- __ecu__ : ultimate strain (optional, default ec20)
- __n__ : shape factor


The curve given as 

where, ,  for 극한한계상태.  for 극단한계상태

참고

__Example__
```
*Function, Type=ParabolaCEnv, Name=ParabolaTest1
 fco=0.85*27 eco=0.00203 ecu=0.0033 n = 1.8
```



### FIBCEnv
CEB/FIB MC90의 콘크리트 재하곡선(compressive envelope)을 정의한다.

```
*Function, Type=FIBCEnv, Name=name
  fco=fco Ec=Ec eco=eco
```

__First dataline__

- __fco=fco__ : compressive strength (requied)
- __Ec=Ec__ : initial tangent modulus (required)
- __eco=eco__ : strain at peak concrete strength (optional, default computed)




그림 1.9 CEB-FIP MC90의 압축 포락선 모델


__Example__
```
*Unit 
*Function, Type=FIBCEnv, Name=FIBCEnvTest1
 fco=25. Ec=23500. 

*Function, Type=FIBCEnv, Name=FIBCEnvTest2
 fco=25. Ec=23500. eco=0.002 
```

### MPPCEnv
Mander, Priestly, Park의 콘크리트 재하곡선(compressive envelope)을 정의한다.

```
*Function, Type=MPPCEnv Name=name
  fco=fco, Ec=Ec, eco=eco, ecu=ecu, fcc=fcc, esp=esp
```

__First dataline__

- __fco=fco__ : unconfined compressive strength (requied)
- __Ec=Ec__ : initial tangent modulus (required)
- __eco=eco__ : strain at peak strength of unconfied concrete (optional, default 0.002)
- __ecu=ecu__ : ultimate strain  (optional, default 2*eco)
- __fcc=fcc__ : confined compressive strength. (optional, default fco)
- __esp=esp__ : spalling strain  (optional, default ecu). The straight line from  to  is assumed, if and only if   is greater than , 


The Mander-Priestly-Park model can define both the confined and unconfined concrete model. 


그림 1.7 Compressive Envelope of Mander, Priestley, Park’s Concrete Model


__Example__
```
*Function, Type=MPPCEnv, Name=MPPCEnvTest1
 fco=25. Ec=23500. 

*Function, Type=MPPCEnv, Name=MPPCEnvTest2
 fco=25. Ec=23500. eco=0.002, ecu=0.004, fcc=40. esp=0.006  
```

### MPPCIE
Mander, Priestly, Park의 콘크리트 비탄성 변형률을 정의한다.
```
*Function, Type=MPPCIE Name=cover
  CompressiveEnv=compressiveEnv epeak=epeak 
```
__First dataline__

- __CompressiveEnv=compressiveEnv__ :Compressive envelope function
- __epeak=epeak__ : strain at peak concrete stength(optional, default 0.002). If the given compressiveEnv is a type of MPPCEnv, Hognestad, and CEBFIB, epeak is neglected(automatically computed),. 


Although this function deefines the inelastic strain by the Mander-Priestly-Park model, it can be used with the abitary compressive envelope function

__Example__
```
*Function, Type=MPPCEnv, Name=concC
 fco=25. Ec=23500. 
 
*Function, Type=MPPCIE, Name=concCI
 compressiveEnv=concC
```

### MaekawaTEnv
Maekawa’ concrete tensile envelope
```
*Function, Type=MaekawaTEnv Name=coverTension
  CompressiveEnv=compressiveEnv,ft=ft,c=c
```

__First dataline__

- __CompressiveEnv=compressiveEnv__ : Compressive envelope function(required)
- __ft=ft__ : tensile strength(required)
- __c=c__ : parameter for Maekawa model (optional, default 0.4)


Maekawa 등(2002)는 보통콘크리트와 인장경화를 고려한 철근콘크리트에 대한 모델에 대한 인장연화곡선을 다음과 같은 동일한 수식으로 제안하였다. 



위에서 는 곡선형상을 결정하는 인자이다.  보통콘크리트로 사용할 때는 파괴에너지와  요소특성길이에 따라 다음 식으로부터 결정해야 한다. 


 철근콘크리트에서는 매개변수 분석을 통해 이형철근의 경우 0.4, 용접강선망(welded wire mesh)의 경우 0.2를 제시하고 있다. 그림 1.15는 대표적인 결과를 나타낸 것이다. 



(a) 보통콘크리트
(b) 인장경화를 반영한 철근콘크리트
그림 1.15 Maekawa 모델

__Example__
