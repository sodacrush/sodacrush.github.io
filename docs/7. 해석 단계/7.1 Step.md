# *Step

해석 단계(analysis step)을 정의한다. 
```
*STEP, TYPE=Static[,Arclength]  NAME=name[, PREV=prevStep]
 EquiTime=t0,tmax [, NLGeom=ON|OFF, LinearSolver=...]
 또는 GivenTime=t1,t2,...[, NLGeom=ON|OFF, LinearSolver=...]
 또는 AutoTime=t0,tmax,dtmin,dtmax,maxInc[, NLGeom=ON|OFF, LinearSolver=...]

*STEP, TYPE=QStatic[,creepOn|creepOff] NAME=name[, PREV=prevStep]
 EquiTime=t0,tmax[, NLGeom=ON|OFF, LinearSolver=...]
 또는 GivenTime=t1,t2,...[, NLGeom=ON|OFF, LinearSolver=...]
 또는 AutoTime=t0,tmax,dtmin,dtmax,maxInc[, NLGeom=ON|OFF, LinearSolver=...]

*STEP, TYPE=Dynamic NAME=name[, PREV=prevStep]
 EquiTime=t0,tmax[, NLGeom=ON|OFF, LinearSolver=...]
 또는 GivenTime=t1,t2,...[, NLGeom=ON|OFF, LinearSolver=...]
 또는 AutoTime=t0,tmax,dtmin,dtmax,maxInc[, NLGeom=ON|OFF, LinearSolver=...]

*STEP, TYPE=Frequency, NAME=name[, PREV=prevStep]
 MODE=nmode[, Shift=shift EigenSolver=eigenSolver]
```

__Keyword line__

- __TYPE=step_type,...__ : 해석유형 및 부가옵션
    * __Static[,Arclength] : 정적해석. Arclength 부가옵션 적용시 arclength 법 적용
    * __QStatic[,CreepOn|CreepOff] : 시간의존적 정적해석(time dependent static analysis), CreepOn 또는 CreepOff 부가 옵션 적용시  
    * __Dynamic__ : 동해석
    * __Frequency__ : 주파수해석
- __Name=name__ :해석의 이름
- __PREV=prevStep__ : 이전 해석단계. 지정하지 않는 경우 초기상태에서 해석이 시작됨\

__First dataline for Static, QStatic, Dynamic__

- EquiTime=id, x, y, z : 절점변호(required)와 좌표(optional, defaut 0,0,0)
- EquiTime=t0,tmax : 등간격의 해석시간간격(time increment)을 지정합니다. 만약 tmax가 t0의 정확한 배수가 아닌 경우 t0가 조정됩니다. t0는 required, tmax는 옵션으로 1.0이 디폴트 값
- GivenTime=t1,t2,... : 주어진 시간으로 해석시간을 지정합니다. 
- AutoTime=t0,tmax,dtmin, dtmax,maxInc : 자동증분(automatic increment)으로 시간간격을 정의합니다. maxInc는 최대 increment(디폴트값은, 1,1,1,1,1000)
- NLGeom={ON|OFF}: 기하비선형 지정
- LinearSolver=... : PARDISO, BiCG, BiCGStab, CGS 등 선형 희소 솔버 지정. 다음으로 지정
    * Pardiso, {InteractiveOff|InteractiveOn-TryPositiveDefinite|PositiveDefinite|Indefinite}
    * BiCG|BiCGStab|CGS {, NoPreconditioner|Jacobi|SSOR|ILU0|ILUT|PardisoS|PardisoD|PardisoDC-TryPositiveDefinite|PositiveDefinite|Indefinite}

__First dataline for Frequency__

- MODE=nmode :number of mode to be extracted (Default 10)
- Shift=shift : shifting frquency (Hz). (Default 0.). 만약 지정되어 있으면 이 값에 가까운 고유진동수를 계산함. 
- EigenSolver=solver :SUBSPACE(Subspace iteration solver) 또는 ARPACK(Arpack solver). 디폴트는 ARAPCK

hfAnalyzer는 정해석/동해석/주파수해석 등 3가지 유형의 해석을 지원한다. 

(1) Static step : 정적해석을 의미한다. 이때 시간은 peudo-time으로 다음과 같은 의미를 가진다. 하중 가려력 방법에 따라 다음과 같이 구분할 수 있다. 

  - Standard load-displacement control : 주어진 시간은 하중계수(load factor)이다. 
  - Arclength control : 주어진 시간은 arclength를 선형거동시 하중계수가 1일 때 발생하는 arclength로 정규화된 peudo-time이다. 따라서 Arclength control을 선형해석에 적용하면 표준 방법과 동일한 시간 증분을 주는 것과 같다. 

(2) QStatic step : 질량효과를 고려하지 않지만 시간의존성을 고려하는 정적해석을 의미하며, 주어진 시간은 실제 시간이다. 시간의존성은 하중과 재료모델의 유형에 따라 발생하는데 QStatic 해석을 수행해야 시간의존성을 반영할 수 있다. 재료모델의 시간의존성은 on/off가 가능하다. 

(3) Dynamic step : 질량효과와 시간의존성을 모두 고려하는 동해석을 의미하며, 주어진 시간은 실제시간이다. 동해석을 수행하는 방법은 Newmark 법과 Hilbert-Hughes-Taylor 법(이하 HHT 법)을 지원하며, *TimeIntegration에서 지정할 수 있다. 디폴트 수치적분법은 ,  , 의 계수를 갖는 Newmark 법(또는 평균가속도법)이다. HHT법은 적용할 경우 의 디폴트 값을 가진다.  *TimeInegration 명령에서 상세 지정이 가능하다. 

(4) Frequency step : 고유치해석은 구조물의 질량과 강성행렬을 이용해 고유치와 고유모드를 구하는 해석이다. 유한요소법에 사용되는 고유치 솔버들은 모든 고유치를 계산하는 것이 아니라 일부 낮은 저차모드만을 계산하도록 특화되어 있다. 고유치솔버로는 subspace iteration 솔버와 ARPACK 솔버를 선택할 수 있으며, ARPACK 솔버가 디폴트이다.  Subspace iteration solver는 대칭 행렬에 대해서만 적용 가능한 반면 ARPACK solver는 대칭, 비대칭 행렬에 모두 적용할 수 있습니다. Subspace iteration 솔버는 ncv = min( min(2*nev,nev+8), n)의 식에 따라 subspace의 크기를 결정한다. 반면에 ARPACK은 대칭행렬의 경우 nev < ncv <= n 의 조건을 만족해야 하고 ncv = 2*nev를 추천하고 있다. 따라서 nev를 n/2보다 작게 값을 지정하는 것이 좋다. 최대 가능한 nev는 nev = n-1이다. 여기에서 n은 질량행렬의 실제 자유도 수이고, ncv는 계산을 위해 필요한 subspace나 Lacoz 벡터의 크기, nev는 필요한 고유치 개수이다. 


__Example__
```
*STEP, TYPE=Static, Name=Case2
*Activate, TYPE=Element
 ALL
*Activate, TYPE=Load
 BC,LC2
*Output, Frequency=1
 D,FN,SF
*Print, File=portalDB3-2.prn 
 D@23, FN@14

*STEP, TYPE=Frequency, Name=Case7
 Mode=10, EigenSolver=SUBSPACE
*Activate, TYPE=Element
 ALL 
*Activate, TYPE=LOAD
 BC 
*Output
*Print File=portalDB3-7.prn 
```