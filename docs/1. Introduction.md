# 1. 개요

hfAnalyzer는 텍스트 입력파일을 읽어 해석을 수행한다. 입력파일은 `*Node`, `*Element` 등과 같이 `*`로 시작하는 예약된 키워드로 시작하는 명령어 블록 구조로 구성된다. 다음은 간단한 프레임 해석에 대한 입력 파일이다.

```
##############################
#  portal frame example
##############################

*NODE, NSET=ALL
 1, 0., 0.
 2, 0.,10.
 3,10.,10.
 4,10., 0.

*ELEMENT, TYPE=B3D2H, ELSET=ALL
 1 1 2 
 2 2 3
 3 3 4

*MATERIAL, TYPE=IsoElasticity, Name=mat
 210E9, 0.3, 0, 7700    # E, nu, alpha, density
 
*SECTION, TYPE=ElasticBeam, Name=BeamSection, MAT=mat, Mass=LUMPED, SHAPE=Rectangle
  0.4, 0.1    # b, h, yc, zc
 
*Distribution, TYPE=Section
 ALL BeamSection
 
*LOAD, TYPE=Support, Name=BC
 1, X|Y|RZ
 4, X|Y|RZ
 ALL, Z|RX|RY

*NSET TYPE=SELECT, NAME=23
 2 3

*NSET TYPE=SELECT, NAME=14
 1 4

 
*LOAD, TYPE=Gravity, Name=LC1
 ALL 0. -9.81 0.
 
*LOAD, TYPE=Concentric, Name=LC2
 2,X,100E3

*ELSET, Name=beam
 2
 
*LOAD, TYPE=LineDistributed, Name=LC3
 beam, 0., -10E3       # target, px, py, pz
 
*LOAD, TYPE=LineDistributed, ECS, Name=LC4
 beam, 0., -10E3      # target, px, py, pz
 
*LOAD, TYPE=Concentric, Name=LC2-Again
 2, X, 100E3
 
#-----------------------------------
# Case 1 : gravity load
#-----------------------------------
*STEP, TYPE=Static, Name=Case1
*Activate, TYPE=Element
 ALL
*Activate, TYPE=Load
 BC,LC1 
*Output, Frequency=1
 D,FN,SF
*Print, File=portalEB3-1.prn 
 D@23, FN@14

#-----------------------------------
# Case 2 : nodal concentric load
#-----------------------------------
*STEP, TYPE=Static, Name=Case2
*Activate, TYPE=Element
 ALL
*Activate, TYPE=Load
 BC,LC2
*Output, Frequency=1
 D,FN,SF
*Print, File=portalEB3-2.prn 
 D@23, FN@14

#-----------------------------------
# Case 3 : frequency
#-----------------------------------
*STEP, TYPE=Frequency, Name=Case6
 10
*Solver, Type=EigenSolver
 SUBSPACE
*Activate, TYPE=Element
 ALL 
*Activate, TYPE=LOAD
 BC 
*Output
 D
*Print File=portalEB3-6.prn 
```


다음은 입력 텍스트 파일에서 사용되는 일반규칙을 나열한 것이다. 

- 입력파일은 텍스트파일이며 한 줄씩 순차적으로 읽어들어 파싱한다. 
- 공백라인은 무시하고, # 문자로 설명문(commentation)을 작성할 수 있다.
- \ 문자를 사용하여 다음 줄과 연결(concatenation)할 수 있다.
- 예약된 키워드(keyword)의 대소문자를 구분하지 않으나, 사용자가 정의한 문자열(예를 들어 요소집합 이름 등)은 대소문자를 구분한다.
- 각 라인은 n1, n2, n3 또는 n1, ..., ID=id1, ... 등과 같은 형태를 가지는 프리포맷(free format)이다. 이때 파싱의 대싱이 되는 토큰(token)은 등호(=), 쉼표(,), 공백문자를 기준으로 구분된다. 프로그램 내부적으로 작동하는 방식은 다음과 같다.
    * 등호(=)를 찾아 등호의 왼쪽 키워드를 인식
    * 프리포맷(free format) 형태로 인식된 각각을 쉼표(,), 공백문자 등을 구분자로 각 토큰으로 분할
- 실수나 정수로 입력이 되는 부분은 간단한 산술 연산을 수행할 수 있다. 예를 들어 1+2*(10+2)와 같은 산술 연산을 수행한다. 연산식 내에 공백이 존재하는 경우 토큰으로 분리되므로 공백이 존재하면 안된다. 

`*`로 시작하는 명령어(command)는 크게 모델링 명령, 해석 명령, 기타 명령로 구분할 수 있다. 다음은 명령어를 요약한 것이다.


__절점 명령__

- __*NODE__ : Define node 
- __*NSET__ : Define node set. 
- __*NGEN__ : Generate nodes with line pattern and assign them to node set
- __*NFILL__ : Generate nodes with filling pattern and assign them to node set 
- __*NCOPY__ : Copy node set

__요소 명령__

- __*ELEMENT__ : Define element 
- __*ELSET__ : Define elementset
- __*ELGEN__ : Generate elements and assign them to elementset
- __*ELCOPY__ : Copy elementset
- __*SECTION__ : Define section

__하중과 구속조건 명령__

- __*LOAD__ : Define load
- __*CONSTRAINT__ : Define constraint

__프라퍼티 명령__

- __*MATERIAL__ : Define material
- __*FUNCTION__ : Define function
- __*GEOMETRY__ : Define geometric entities - line and surface.
- __*COORDINATE__ : Define coordinate system

__해석 명령__

- __*STEP__ : Define analysis step
- __*Activate__ : Activate elements, constraints, and loads
- __*Inactivate__ : Inactivate elements, constraints, and loads
- __*Convergency__ : Assign convergency crietria
- __*SolutionAlgorithm__ : Assign solution algorithm for equilibrium iteration
- __*TimeIntegration__ : Assign time integration scheme for dynamic step
- __*RayleighDamping__ : Assign Rayleigh damping for dynamic step
- __*Modal__ : Set dynamic analysis with modal analysis and assign modal damping ratios.
- __*Output__ : Assign requests for field output for output file(ODB file).
- __*Print__ : Assign requests for printing fields for a specified text file. 
- __*History__ : Assign request for history output. 
- __*Check__ : Assign request for field check
~~~~

__기타 명령__

- __*Title__ : title 
- __*Include__ : Include external file.
- __*Control__ : Setup control parameters
- __*Distribution__ : Assign nodal and element properties
- __*TestMaterial__ : Test material model for given strain history


