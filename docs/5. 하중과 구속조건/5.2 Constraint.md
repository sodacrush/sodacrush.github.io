# *Constraint

주어진 타입에 따라 구속조건을 정의한다. 

```
*CONSTRAINT, TYPE=type, Name=name
  ...
```

__Parameters for keyword line__

- __TYPE=type__ : 구속조건의 종류. RigidLink, BeamLink, MPC, NodeToSurface 등. 
- __Name=name__ : 구속조건 이름

구속조건은 multi-point constraint를 의미하며, single-point constraint인 경계조건은 __*Load, Type=Support__ 명령으로 부과한다. 
  hfAnalyzer는 automatic selection of slave Dof and over-constraint handling scheme을 사용하기 때문에 일반유한요소 프로그램에서 발생하는 과구속조건 문제나 변환법 적용시 이미 사용한 slave Dof를 다른 구속조건식에 사용할 수 없다는 제한 조건이 없다. 


### RigidLink
두 절점의 대응하는 자유도를 구속.

```
*CONSTRAINT, TYPE=RigidLink Name=name
 slaveNode, masterNode, DOF=dof1,dof2,...
 slaveNodeSet, masterNodeSet, DOF=dof1,dof2,...
 slaveNodeSet, masterNode, DOF=dof1,dof2,...
 ...
```

__Parameters for data line__

- __slaveNode, masterNode__ : 연결한 두 절점
- __slaveNodeSet, masterNodeSet__ :  연결한 두 절점집합. 두 절점집합내의 절점이 1:1로 매칭되므로 절점집합내 절점의 개수가 동일해야 함. 
- __slaveNodeSet, masterNode__ : slaveNodeSet 내 모든 절점을 masterNode로 연결
- __DOF=dof1,dof2,...__ : 부과할 자유도 조건, X, Y, Z, RX, RY, RZ 등

RigidLink는 두 절점의 대응하는 자유도를 서로 구속한다. 절점집합 쌍을 지정할 경우 절점집합내의 절점 순서에 따라 구성되는 절점 쌍에 대해 서로 자유도가 구속된다. 


__Example__
```
*CONSTRAINT, TYPE=RigidLink Name=c1
 1 2 DOF=X,Y,Z
 left right DOF=X
```


### BeamLink
빔 링크를 정의

```
*CONSTRAINT, TYPE=BeamLink Name=name
 slaveNode, masterNode, Plane=plane
 slaverNodeSet, masterNodeSet, Plane=plane
 slaverNodeSet, masterNode, Plane=plane
 ...
```

__Parameters for data line__

- slaveNode, masterNode : 연결한 두 절점
- slaveNodeSet, masterNodeSet :  연결한 두 절점집합. 두 절점집합내의 절점이 1:1로 매칭되므로 절점집합내 절점의 개수가 동일해야 함. 
- slaveNodeSet, masterNode : slaveNodeSet 내 모든 절점을 masterNode로 연결
- Plane=plane: 구속조건을 부과할 평면, XY, YZ,  ZX, NOPLANE 중 하나이며 디폴트는 NOPLANE


BeamLink는 연결하는 두 절점이 강체운동이 될 수 있도록 회전자유도를 고려하여 구속한다. 절점집합 쌍을 지정할 경우 절점집합내의 절점 순서에 따라 구성되는 절점 쌍에 대해 서로 자유도가 구속된다.   그림과 같이 보로 보강쉘을 모델링할 때 쉘의 절점과 보의 절점을 연결하거나, 평행하게 연결된 보를 연결할 때 사용할 수 있다. 




__Example__
```
*CONSTRAINT, TYPE=BeamLink Name=c1
 1001 1002 Plane=XY
 left right 
```

### NodeToSurface
두 절점의 대응하는 자유도를 구속

```
*CONSTRAINT, TYPE=NodeToSurface Name=name
 n, surface, DOF=dof1,dof2,...
 ...
```

__Parameters for data line__

- n :절점 또는 절점집합(required)
- surface : surface(required)
- DOF=dof1,dof2,. : Degree-of-freedoms, which should be one of X, Y, Z (required)

Node의 orthogonal projection point(foot point of node)에 대한 구속조건을 부과함. 현재는 Translational DOF에 대해서만 작동함.

__Example__

```
*NSET, Name=slabLine
...

*Geometry, Type=Surface, Name=slab
 ...

*Constraint, TYPE=NodeToSurface, Name=C
 slabLine, slab, DOF=X,Y,Z
```

### MPC
사용자 정의 선형 구속조건을 정의

```
*CONSTRAINT, TYPE=MPC, Name=name
  Expr=nodal_expression
  ...
  nodeset1 nodeset2 Expr=matching_expression
  ...
```

__Parameters for data line__

- nodal_expression : Define one multi-point constraint condition as string. (required)
- nodeset1 nodeset2 :Generate multi-point constraint conditions of each node pair given by two nodesets nodeset1 and nodeset2.  (required) 
- matching_expression : matching expression for node pair(required)

(1) "nodal_expression“을 지정하는 경우
It can be expressed in simple linear combination, such as 2*X2-3*Y3-5*X4. In the expression, binding DOF symbol X, Y, Z, RX, RY, RZ with node number is used for the specific DOF. For example, X2 means X DOF of node 1.

(2) “matching_expression"을 지정하는 경우
Generate multi-point constraint conditions of each node pair given by two nodesets nodeset1 and nodeset2.  matching_expression can be expressed in simple linear combination, such as 2*X1-3*Y2-5*X1. In the expression, binding DOF symbol X, Y, Z, RX, RY, RZ with node set number is used for the specific DOF. For example,  X1 means X DOF in nodeset1, and Y2 means Y DOF in nodeset2. The number of node in two nodeset should be same.

  In HFC library, node set and element set is sorted or unsorted with the ids. So, in defining nultipoint constraint with nodeset, be sure of the order of nodes. 



__Example__
```
*CONSTRAINT, TYPE=MPC, Name=Y-Lock
 left,right Expr=Y1-Y2    # matching expression
 Expr=Y3-4*Y4             # nodal expression
```